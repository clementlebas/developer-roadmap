import"./hoisted.9e721a23.js";import"./hoisted.d886f85e.js";import"./hoisted.8774471e.js";function w(d){let t=d>>16&255,e=d>>8&255,i=d&255;return`rgb(${t},${e},${i})`}function c(d,t={},e){let i=document.createElementNS("http://www.w3.org/2000/svg",d);for(let o in t)t.hasOwnProperty(o)&&i.setAttribute(o,t[o]);return e&&e.appendChild(i),i}const m=2.7,E=4,x=2,y={black:["#000"],gray:["#000","#333","#666","#999","#ccc","#ddd","#eee"],white:["#fff"],red:["#cf2a27","#ea9999","#eo6666","#cc0000","#990000","#660000"],orange:["#ff9900","#f9cb9c","#f6b26b","#e69138","#b45f06","#783f04"],yellow:["#ffff00","#ffe599","#ffd966","#f1c232","#bf9000","#7f6000"],green:["#009e0f","#b6d7a8","#93c47d","#6aa84f","#38761d","#274e13"],cyan:["#00ffff","#a2c4c9","#76a5af","#45818e","#134f5c","#0c343d"],blue:["#2b78e4","#9fc5f8","#6fa8dc","#597eaa","#085394","#073763"],purple:["#9900ff","#b4a7d6","#8e7cc3","#674ea7","#351c75","#20124d"],pink:["#ff00ff","#d5a6bd","#c27ba0","#a64d79","#741b47","#4c1130"]};class b{constructor(t,e){this.svgRoot=t,this.fontFamily=e,this.canvasRenderingContext2D=document.createElement("canvas").getContext("2d")}render(t,e){let i=t.typeID;i in this?this[i](t,e):console.log(`'${i}' control type not implemented`)}parseColor(t,e){return t===void 0?`rgb(${e})`:w(t)}parseFontProperties(t){var e,i,o;return{style:(e=t.properties)!=null&&e.italic?"italic":"normal",weight:(i=t.properties)!=null&&i.bold?"bold":"normal",size:(o=t.properties)!=null&&o.size?t.properties.size+"px":"13px",family:this.fontFamily}}measureText(t,e){return this.canvasRenderingContext2D.font=e,this.canvasRenderingContext2D.measureText(t)}drawRectangle(t,e){var i,o,s;c("rect",{x:parseInt(t.x)+m/2,y:parseInt(t.y)+m/2,width:parseInt(t.w??t.measuredW)-m,height:parseInt(t.h??t.measuredH)-m,rx:x,fill:this.parseColor((i=t.properties)==null?void 0:i.color,"255,255,255"),"fill-opacity":((o=t.properties)==null?void 0:o.backgroundAlpha)??1,stroke:this.parseColor((s=t.properties)==null?void 0:s.borderColor,"0,0,0"),"stroke-width":m},e)}addText(t,e,i,o){let s=t.properties.text??"",n=parseInt(t.x),a=parseInt(t.y),r=this.parseFontProperties(t),l=this.measureText(s,`${r.style} ${r.weight} ${r.size} ${r.family}`),p=o==="center"?n+(t.w??t.measuredW)/2-l.width/2:n,f=a+t.measuredH/2+l.actualBoundingBoxAscent/2,h=c("text",{x:p,y:f,fill:i,"font-style":r.style,"font-weight":r.weight,"font-size":r.size},e);if(!s.includes("{color:")){let g=c("tspan",{},h);g.textContent=s;return}s.split(/{color:|{color}/).forEach(g=>{if(g.includes("}")){let[u,k]=g.split("}");if(!u.startsWith("#")){let I=parseInt(u.slice(-1));u=isNaN(I)?y[u][0]:y[u][I]}let v=c("tspan",{fill:u},h);v.textContent=k}else{let u=c("tspan",{},h);u.textContent=g}})}TextArea(t,e){this.drawRectangle(t,e)}Canvas(t,e){this.drawRectangle(t,e)}Label(t,e){var i;this.addText(t,e,this.parseColor((i=t.properties)==null?void 0:i.color,"0,0,0"),"left")}TextInput(t,e){var i;this.drawRectangle(t,e),this.addText(t,e,this.parseColor((i=t.properties)==null?void 0:i.textColor,"0,0,0"),"center")}Arrow(t,e){var i,o,s;let n=parseInt(t.x),a=parseInt(t.y),{p0:r,p1:l,p2:p}=t.properties,f;((i=t.properties)==null?void 0:i.stroke)==="dotted"?f="0.8 12":((o=t.properties)==null?void 0:o.stroke)==="dashed"&&(f="28 46");let h={x:(p.x-r.x)*l.x,y:(p.y-r.y)*l.x};c("path",{d:`M${n+r.x} ${a+r.y}Q${n+r.x+h.x+h.y*l.y*3.6} ${a+r.y+h.y+-h.x*l.y*3.6} ${n+p.x} ${a+p.y}`,fill:"none",stroke:this.parseColor((s=t.properties)==null?void 0:s.color,"0,0,0"),"stroke-width":E,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":f},e)}Icon(t,e){var i;let o=parseInt(t.x),s=parseInt(t.y),n=10;c("circle",{cx:o+n,cy:s+n,r:n,fill:this.parseColor((i=t.properties)==null?void 0:i.color,"0,0,0")},e),t.properties.icon.ID==="check-circle"&&c("path",{d:`M${o+4.5} ${s+n}L${o+8.5} ${s+n+4} ${o+15} ${s+n-2.5}`,fill:"none",stroke:"#fff","stroke-width":3.5,"stroke-linecap":"round","stroke-linejoin":"round"},e)}HRule(t,e){var i,o,s;let n=parseInt(t.x),a=parseInt(t.y),r;((i=t.properties)==null?void 0:i.stroke)==="dotted"?r="0.8, 8":((o=t.properties)==null?void 0:o.stroke)==="dashed"&&(r="18, 30"),c("path",{d:`M${n} ${a}L${n+parseInt(t.w??t.measuredW)} ${a}`,fill:"none",stroke:this.parseColor((s=t.properties)==null?void 0:s.color,"0,0,0"),"stroke-width":m,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":r},e)}__group__(t,e){var i;const o=((i=t?.properties)==null?void 0:i.controlName)||"";let s=c("g",{...o?{class:"clickable-group","data-group-id":o}:{}},e);t.children.controls.control.sort((n,a)=>n.zOrder-a.zOrder).forEach(n=>{n.x=parseInt(n.x,10)+parseInt(t.x,10),n.y=parseInt(n.y,10)+parseInt(t.y,10),this.render(n,s)})}}async function C(d,t={}){if(t={padding:5,fontFamily:"balsamiq",fontURL:"https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2",...t},t.fontURL){let l=new FontFace(t.fontFamily,`url(${t.fontURL})`);await l.load(),document.fonts.add&&document.fonts.add(l)}let e=d.mockup,i=e.measuredW-e.mockupW-t.padding,o=e.measuredH-e.mockupH-t.padding,s=parseInt(e.mockupW)+t.padding*2,n=parseInt(e.mockupH)+t.padding*2,a=c("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`${i} ${o} ${s} ${n}`,style:"font-family: balsamiq"}),r=new b(a,t.fontFamily);return e.controls.control.sort((l,p)=>l.zOrder-p.zOrder).forEach(l=>{r.render(l,a)}),a}class L{constructor(){this.overlayId="topic-overlay",this.contentId="topic-content",this.loaderId="topic-loader",this.topicBodyId="topic-body",this.topicActionsId="topic-actions",this.markTopicDoneId="mark-topic-done",this.markTopicPendingId="mark-topic-pending",this.closeTopicId="close-topic",this.contributionTextId="contrib-meta",this.activeRoadmapId=null,this.activeTopicId=null,this.handleTopicClick=this.handleTopicClick.bind(this),this.close=this.close.bind(this),this.resetDOM=this.resetDOM.bind(this),this.populate=this.populate.bind(this),this.handleOverlayClick=this.handleOverlayClick.bind(this),this.markAsDone=this.markAsDone.bind(this),this.markAsPending=this.markAsPending.bind(this),this.queryRoadmapElementsByTopicId=this.queryRoadmapElementsByTopicId.bind(this),this.init=this.init.bind(this)}get loaderEl(){return document.getElementById(this.loaderId)}get markTopicDoneEl(){return document.getElementById(this.markTopicDoneId)}get markTopicPendingEl(){return document.getElementById(this.markTopicPendingId)}get topicActionsEl(){return document.getElementById(this.topicActionsId)}get contributionTextEl(){return document.getElementById(this.contributionTextId)}get contentEl(){return document.getElementById(this.contentId)}get overlayEl(){return document.getElementById(this.overlayId)}resetDOM(t=!1){t?this.overlayEl.classList.add("hidden"):this.overlayEl.classList.remove("hidden"),this.loaderEl.classList.remove("hidden"),this.topicActionsEl.classList.add("hidden"),this.contributionTextEl.classList.add("hidden"),this.contentEl.replaceChildren("")}close(){this.resetDOM(!0),this.activeRoadmapId=null,this.activeTopicId=null}populate(t){this.contentEl.replaceChildren(t),this.loaderEl.classList.add("hidden"),this.topicActionsEl.classList.remove("hidden"),this.contributionTextEl.classList.remove("hidden");const e=(this.activeTopicId||"").replace(/^\d+-/,"");localStorage.getItem(e)==="done"?(this.markTopicDoneEl.classList.add("hidden"),this.markTopicPendingEl.classList.remove("hidden")):(this.markTopicDoneEl.classList.remove("hidden"),this.markTopicPendingEl.classList.add("hidden"))}fetchTopicHtml(t,e){const i=e.replace(/^\d+-/,"").replaceAll(/:/g,"/"),o=`/${t}/${i}/`;return fetch(o).then(s=>s.text()).then(s=>new DOMParser().parseFromString(s,"text/html").getElementById("main-content"))}handleTopicClick(t){const{roadmapId:e,topicId:i}=t.detail;if(!i||!e){console.log("Missing topic or roadmap: ",t.detail);return}if(this.activeRoadmapId=e,this.activeTopicId=i,/^ext_link/.test(i)){window.open(`https://${i.replace("ext_link:","")}`);return}this.resetDOM(),this.fetchTopicHtml(e,i).then(o=>{this.populate(o)}).catch(o=>{console.error(o),this.populate("Error loading the content!")})}queryRoadmapElementsByTopicId(t){const e=document.querySelectorAll(`[data-group-id$="-${t}"]`),i=[];return e.forEach(o=>{const s=o?.dataset?.groupId||"";new RegExp(`^\\d+-${t}$`).test(s)&&i.push(o)}),i}markAsDone(t){const e=t.replace(/^\d+-/,"");localStorage.setItem(e,"done"),this.queryRoadmapElementsByTopicId(e).forEach(i=>{i?.classList?.add("done")})}markAsPending(t){const e=t.replace(/^\d+-/,"");localStorage.removeItem(e),this.queryRoadmapElementsByTopicId(e).forEach(i=>{i?.classList?.remove("done")})}handleOverlayClick(t){if(!t.target.closest(`#${this.topicBodyId}`)){this.close();return}(t.target.id===this.markTopicDoneId||t.target.closest(`#${this.markTopicDoneId}`))&&(this.markAsDone(this.activeTopicId),this.close()),(t.target.id===this.markTopicPendingId||t.target.closest(`#${this.markTopicPendingId}`))&&(this.markAsPending(this.activeTopicId),this.close()),(t.target.id===this.closeTopicId||t.target.closest(`#${this.closeTopicId}`))&&this.close()}init(){window.addEventListener("topic.click",this.handleTopicClick),window.addEventListener("click",this.handleOverlayClick),window.addEventListener("keydown",t=>{t.key.toLowerCase()==="escape"&&this.close()})}}class T{constructor(){this.init=this.init.bind(this),this.onScroll=this.onScroll.bind(this),this.shareIconsId="page-share-icons"}get shareIconsEl(){return document.getElementById(this.shareIconsId)}onScroll(){if(window.scrollY<100||window.innerWidth<1050)return this.shareIconsEl.classList.add("hidden"),null;this.shareIconsEl.classList.remove("hidden")}init(){this.shareIconsEl&&window.addEventListener("scroll",this.onScroll,{passive:!0})}}class ${constructor(){this.roadmapId="",this.jsonUrl="",this.containerId="roadmap-svg",this.init=this.init.bind(this),this.onDOMLoaded=this.onDOMLoaded.bind(this),this.fetchRoadmapSvg=this.fetchRoadmapSvg.bind(this),this.handleRoadmapClick=this.handleRoadmapClick.bind(this),this.prepareConfig=this.prepareConfig.bind(this)}get containerEl(){return document.getElementById(this.containerId)}prepareConfig(){if(!this.containerEl)return!1;const t=this.containerEl.dataset;return this.roadmapId=t.roadmapId,this.jsonUrl=t.jsonUrl,!0}fetchRoadmapSvg(t){return t?fetch(t).then(function(e){return e.json()}).then(function(e){return C(e,{fontURL:"/fonts/balsamiq.woff2"})}):(console.error("jsonUrl not defined in frontmatter"),null)}onDOMLoaded(){this.prepareConfig()&&this.fetchRoadmapSvg(this.jsonUrl).then(t=>{document.getElementById(this.containerId).replaceChildren(t)}).catch(console.error)}handleRoadmapClick(t){const e=t.target.closest("g")||{},i=e.dataset?e.dataset.groupId:"";i&&(t.stopImmediatePropagation(),window.dispatchEvent(new CustomEvent("topic.click",{detail:{topicId:i,roadmapId:this.roadmapId}})))}init(){window.addEventListener("DOMContentLoaded",this.onDOMLoaded),window.addEventListener("click",this.handleRoadmapClick)}}const D=new $;D.init();const R=new L;R.init();const P=new T;P.init();document.querySelectorAll("[faq-question]").forEach(d=>{d.addEventListener("click",()=>{document.querySelectorAll("[faq-answer]").forEach(e=>{e.classList.add("hidden")});const t=d.nextElementSibling;t&&t.classList.remove("hidden")})});document.querySelector("[submit-download-form]")?.addEventListener("click",()=>{window.fireEvent({category:"Subscription",action:"Submitted Popup Form",label:"Download Roadmap Popup"})});class S{constructor(){this.triggerPopup=this.triggerPopup.bind(this),this.onDOMLoaded=this.onDOMLoaded.bind(this),this.handleClosePopup=this.handleClosePopup.bind(this),this.handleKeydown=this.handleKeydown.bind(this)}triggerPopup(t){const e=t?.target?.closest("[data-popup]")?.dataset?.popup||"unknown-popup",i=document.querySelector(`#${e}`);if(!i)return;i.classList.remove("hidden"),i.classList.add("flex");const o=i.querySelector("[autofocus]");o&&o.focus()}handleClosePopup(t){const e=t.target,i=e.closest(".popup-body"),o=e.closest(".popup");!e.closest(".popup-close")&&i||o&&(o.classList.add("hidden"),o.classList.remove("flex"))}handleKeydown(t){if(t.key!=="Escape")return;const e=document.querySelector(".popup:not(.hidden)");e&&(e.classList.add("hidden"),e.classList.remove("flex"))}onDOMLoaded(){document.addEventListener("click",this.triggerPopup),document.addEventListener("click",this.handleClosePopup),document.addEventListener("keydown",this.handleKeydown)}init(){window.addEventListener("DOMContentLoaded",this.onDOMLoaded)}}const B=new S;B.init();
